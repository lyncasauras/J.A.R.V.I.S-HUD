
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>J.A.R.V.I.S HUD</title>
  <style>
    body {
      background: #000014;
      color: #00faff;
      font-family: 'Orbitron', sans-serif;
      margin: 0;
      padding: 2rem;
    }
    .hud-container {
      max-width: 800px;
      margin: auto;
      border: 2px solid #00faff;
      padding: 2rem;
      border-radius: 20px;
      background: rgba(0, 255, 255, 0.05);
      text-align: center;
    }
    #status, #recognized {
      margin: 1rem 0;
    }
    #log {
      max-height: 150px;
      overflow-y: auto;
      text-align: left;
      font-size: 0.9rem;
      border: 1px solid #00aaff;
      padding: 0.5rem;
      background-color: #001122;
    }
  </style>
</head>
<body>
  <div class="hud-container">
    <h1>J.A.R.V.I.S HUD</h1>
    <p id="status">Initializing voice systems...</p>
    <p id="recognized">Say “Jarvis” to activate</p>
    <div id="log"></div>
  </div>

  <script>
    const statusEl = document.getElementById('status');
    const recognizedEl = document.getElementById('recognized');
    const logEl = document.getElementById('log');

    const wakeWord = "jarvis";
    let recognizing = false;
    let isSpeaking = false;

    const synth = window.speechSynthesis;

    function speak(text) {
      if (isSpeaking) return;
      isSpeaking = true;
      const utterance = new SpeechSynthesisUtterance(text);
      utterance.lang = 'en-US';
      utterance.rate = 1;
      utterance.pitch = 1;
      utterance.onend = () => {
        isSpeaking = false;
        if (!recognizing) startRecognition();
      };
      synth.speak(utterance);
      statusEl.textContent = "Jarvis is speaking...";
    }

    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
    if (!SpeechRecognition) {
      statusEl.textContent = "Speech Recognition not supported.";
    } else {
      const recognition = new SpeechRecognition();
      recognition.continuous = true;
      recognition.interimResults = false;
      recognition.lang = 'en-US';

      recognition.onstart = () => {
        recognizing = true;
        statusEl.textContent = "Listening for 'Jarvis'...";
      };

      recognition.onerror = (e) => {
        logEl.innerHTML += `<div><strong>Error:</strong> ${e.error}</div>`;
        if (e.error === 'not-allowed') {
          statusEl.textContent = "Microphone access denied.";
        }
      };

      recognition.onend = () => {
        recognizing = false;
        if (!isSpeaking) startRecognition();
      };

      recognition.onresult = (event) => {
        const transcript = event.results[event.results.length - 1][0].transcript.trim().toLowerCase();
        recognizedEl.textContent = "You said: " + transcript;
        logEl.innerHTML += `<div>&gt; ${transcript}</div>`;
        logEl.scrollTop = logEl.scrollHeight;

        if (transcript.includes(wakeWord)) {
          recognition.stop();
          speak("Yes, how can I help you?");
        }
      };

      function startRecognition() {
        try {
          recognition.start();
        } catch (e) {
          logEl.innerHTML += `<div><em>Already started</em></div>`;
        }
      }

      // Start on load
      startRecognition();
    }
  </script>
</body>
</html>
